{{ if not .IsHome }}

  {{/* ======================= TOC Tá»ª Hugo TableOfContents ======================= */}}
  {{ if .TableOfContents }}

  <aside style="
    position:fixed;
    right:28px;
    top:120px;
    width:320px;
    z-index:60;
    pointer-events:none;
  ">
    <div class="toc-card" style="
      pointer-events:auto;
      background:var(--entry);
      border:1px solid var(--border);
      border-radius:18px;
      padding:1.4rem 1.4rem 1.2rem;
      box-shadow:0 18px 48px rgba(0,0,0,0.10);
      font-size:0.86rem;
      line-height:1.6;
    ">

      <!-- HEADER -->
      <div style="
        display:flex;
        align-items:center;
        justify-content:space-between;
        font-weight:600;
        font-size:0.9rem;
        margin-bottom:12px;
        padding-bottom:10px;
        border-bottom:1px solid var(--border);
      ">
        <span>ðŸ“‘ Má»¥c lá»¥c</span>

        <button
          aria-label="Toggle TOC"
          onclick="
            var toc = this.closest('.toc-card').querySelector('.toc-body');
            if (toc.style.display === 'none') {
              toc.style.display = '';
              this.textContent = 'âˆ’';
            } else {
              toc.style.display = 'none';
              this.textContent = '+';
            }
          "
          style="
            background:none;
            border:none;
            cursor:pointer;
            font-size:1.1rem;
            font-weight:600;
            color:var(--secondary);
          "
        >âˆ’</button>
      </div>

      <!-- BODY -->
      <div class="toc-body" style="max-height:calc(100vh - 260px); overflow-y:auto;">
        {{ .TableOfContents }}
      </div>

    </div>
  </aside>

  <style>
    #TableOfContents { font-size:0.86rem; }
    #TableOfContents ul { list-style:none; margin:0; padding:0; }
    #TableOfContents li { margin:6px 0; }

    #TableOfContents a{
      display:block;
      padding:4px 8px;
      border-radius:6px;
      text-decoration:none;
      color:var(--secondary);
      transition:background .15s,color .15s;
    }
    #TableOfContents a:hover{
      background:rgba(0,0,0,.04);
      color:var(--primary);
    }

    #TableOfContents ul ul{
      margin-top:4px;
      padding-left:16px;
      border-left:1px solid var(--border);
    }
    #TableOfContents ul ul a{ font-size:.84rem; padding-left:12px; }
    #TableOfContents ul ul ul a{ font-size:.82rem; }
  </style>

  {{ end }}

  {{/* ======================= TOC Tá»ª Fragments (LIST / SECTION) ======================= */}}
  {{ if and (not .TableOfContents) .Fragments.Headings }}

  <aside style="
    position:fixed;
    right:28px;
    top:120px;
    width:320px;
    z-index:60;
    pointer-events:none;
  ">
    <div class="toc-card" style="
      pointer-events:auto;
      background:var(--entry);
      border:1px solid var(--border);
      border-radius:18px;
      padding:1.4rem 1.4rem 1.2rem;
      box-shadow:0 18px 48px rgba(0,0,0,0.10);
      font-size:0.86rem;
      line-height:1.6;
    ">

      <div style="
        display:flex;
        align-items:center;
        justify-content:space-between;
        font-weight:600;
        font-size:0.9rem;
        margin-bottom:12px;
        padding-bottom:10px;
        border-bottom:1px solid var(--border);
      ">
        <span>ðŸ“‘ Má»¥c lá»¥c</span>

        <button
          onclick="
            var toc = this.closest('.toc-card').querySelector('.toc-body');
            if (toc.style.display === 'none') {
              toc.style.display = '';
              this.textContent = 'âˆ’';
            } else {
              toc.style.display = 'none';
              this.textContent = '+';
            }
          "
          style="
            background:none;
            border:none;
            cursor:pointer;
            font-size:1.1rem;
            font-weight:600;
            color:var(--secondary);
          "
        >âˆ’</button>
      </div>

      <div class="toc-body">
        <ul style="list-style:none; padding:0; margin:0;">
          {{ range .Fragments.Headings }}
            {{ if ge .Level 2 }}
              <li data-level="{{ .Level }}" style="margin:6px 0;">
                <a href="#{{ .ID }}" style="
                  display:block;
                  padding:4px 8px;
                  border-radius:6px;
                  text-decoration:none;
                  color:var(--secondary);
                ">
                  {{ .Title }}
                </a>
              </li>
            {{ end }}
          {{ end }}
        </ul>
      </div>

    </div>
  </aside>

  <style>
    aside li[data-level="2"] a{ padding-left:8px; font-weight:500; }
    aside li[data-level="3"] a{ padding-left:22px; }
    aside li[data-level="4"] a{ padding-left:36px; font-size:.82rem; }
    aside li[data-level="5"] a{ padding-left:50px; font-size:.8rem; }
  </style>

  {{ end }}

{{ end }}
